using System;

class Solution {
    public int solution(int[] A) {
        
        //get length of array and create all consecutive sums
        int lengthOfA = A.Length;
        
        //create array of length A
        //so that it contains the differences
        //between all the values and the first
        int[] endingSum = new int[lengthOfA];
        
        //declare variable which will be used
        int subtotal = 0;
        
        //populate the array
        for( int i = 0; i < lengthOfA; i++) {
            
            //add current array item to subtotal
            subtotal = A[i] - A[0];
            
            //add subtotal entry to the array
            //of sums of endings
            endingSum[i] = subtotal;
            
            //debug - output the current subtotal
            //Console.WriteLine(endingSum[i]);
        }
        
        //create an integer to store the index of the
        //maximum value ending
        //and variable for storing current maximum ending
        int maxEndingIndex = 0;
        int maxEndingValue = -500000;
        
        //go through the array and select the maximum ending value
        for( int i = 1; i < lengthOfA; i++) {
            
            //compare the endings
            if(endingSum[i] > maxEndingValue) {
                
                //save the maximum ending value
                maxEndingValue = endingSum[i];
                
                //debug - output current max
                //Console.WriteLine(maxEndingValue);
                
                //save index of maximum ending value
                maxEndingIndex = i;
                
                //debug
                Console.WriteLine(maxEndingIndex);
            }
        }
        
        
        //go through array and do the same as above but
        //find the lowest sum up to (and including) the
        //largest sum
        
        //declare minimum ending value and index variables
        int minEndingIndex = 0;
        int minEndingValue = -500000;
        
        //go through the array and select the minimum ending value
        for( int i = 0; i < maxEndingIndex; i++) {
            
            //compare the endings
            if(endingSum[i] < maxEndingValue) {
                
                //save the minimum ending value
                minEndingValue = endingSum[i];
                
                //save index of minimum ending value
                minEndingIndex = i;
                
                //debug
                Console.WriteLine(minEndingIndex);
            }
        }
        
        //create integer to store maxiumum transaction
        int maxTransaction = 0;
        
        //set the maximum transaction value to be the largest ending value - the lowest ending value (initial cost in context)
        if(minEndingValue < 0) {
            
            //set maximum transaction to be the maximum ending
            //and take away the largest loss
            maxTransaction = maxEndingValue - minEndingValue;
        }
        
        //return 0 if no profit can be made
        if( maxTransaction <= 0) {
            
            //return 0 because maximum transaction is below 0
            //or equal to 0, as that means no profit can be made
            return 0;
        } else {
            
            //otherwise retrun the largest possible transaction
            return maxTransaction;
        }
    }
}
